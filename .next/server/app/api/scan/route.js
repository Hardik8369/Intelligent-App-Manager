"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/scan/route";
exports.ids = ["app/api/scan/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscan%2Froute&page=%2Fapi%2Fscan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscan%2Froute.ts&appDir=C%3A%5CUsers%5Cgowda%5COneDrive%5CDesktop%5Cintelligent-app-manager%20(2)%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cgowda%5COneDrive%5CDesktop%5Cintelligent-app-manager%20(2)&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscan%2Froute&page=%2Fapi%2Fscan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscan%2Froute.ts&appDir=C%3A%5CUsers%5Cgowda%5COneDrive%5CDesktop%5Cintelligent-app-manager%20(2)%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cgowda%5COneDrive%5CDesktop%5Cintelligent-app-manager%20(2)&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_gowda_OneDrive_Desktop_intelligent_app_manager_2_app_api_scan_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/scan/route.ts */ \"(rsc)/./app/api/scan/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/scan/route\",\n        pathname: \"/api/scan\",\n        filename: \"route\",\n        bundlePath: \"app/api/scan/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\gowda\\\\OneDrive\\\\Desktop\\\\intelligent-app-manager (2)\\\\app\\\\api\\\\scan\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_gowda_OneDrive_Desktop_intelligent_app_manager_2_app_api_scan_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/scan/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzY2FuJTJGcm91dGUmcGFnZT0lMkZhcGklMkZzY2FuJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGc2NhbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNnb3dkYSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q2ludGVsbGlnZW50LWFwcC1tYW5hZ2VyJTIwKDIpJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNnb3dkYSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q2ludGVsbGlnZW50LWFwcC1tYW5hZ2VyJTIwKDIpJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwQztBQUN2SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvP2QwYWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcZ293ZGFcXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxpbnRlbGxpZ2VudC1hcHAtbWFuYWdlciAoMilcXFxcYXBwXFxcXGFwaVxcXFxzY2FuXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zY2FuL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2NhblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc2Nhbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGdvd2RhXFxcXE9uZURyaXZlXFxcXERlc2t0b3BcXFxcaW50ZWxsaWdlbnQtYXBwLW1hbmFnZXIgKDIpXFxcXGFwcFxcXFxhcGlcXFxcc2NhblxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc2Nhbi9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscan%2Froute&page=%2Fapi%2Fscan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscan%2Froute.ts&appDir=C%3A%5CUsers%5Cgowda%5COneDrive%5CDesktop%5Cintelligent-app-manager%20(2)%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cgowda%5COneDrive%5CDesktop%5Cintelligent-app-manager%20(2)&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/scan/route.ts":
/*!*******************************!*\
  !*** ./app/api/scan/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst APP_EXTENSIONS = [\n    \".exe\",\n    \".msi\",\n    \".apk\",\n    \".sh\",\n    \".app\",\n    \".deb\",\n    \".rpm\",\n    \".dmg\",\n    \".pkg\",\n    \".appx\",\n    \".snap\"\n];\nasync function calculateFileHash(filePath) {\n    try {\n        const fileBuffer = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readFile(filePath);\n        const hashSum = crypto__WEBPACK_IMPORTED_MODULE_3___default().createHash(\"sha256\");\n        hashSum.update(fileBuffer);\n        return hashSum.digest(\"hex\");\n    } catch (error) {\n        console.error(`Error calculating hash for ${filePath}:`, error);\n        return \"\";\n    }\n}\nasync function scanDirectory(dirPath) {\n    const files = [];\n    // Clean the directory path - remove extra quotes and normalize\n    const cleanPath = dirPath.replace(/^[\"']|[\"']$/g, \"\").trim();\n    try {\n        // Check if directory exists\n        const stats = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(cleanPath);\n        if (!stats.isDirectory()) {\n            throw new Error(`Path is not a directory: ${cleanPath}`);\n        }\n        console.log(`Scanning directory: ${cleanPath}`);\n        const entries = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readdir(cleanPath, {\n            withFileTypes: true\n        });\n        for (const entry of entries){\n            const fullPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(cleanPath, entry.name);\n            if (entry.isDirectory()) {\n                // Recursively scan subdirectories with error handling\n                try {\n                    const subFiles = await scanDirectory(fullPath);\n                    files.push(...subFiles);\n                } catch (error) {\n                    console.error(`Error scanning subdirectory ${fullPath}:`, error);\n                // Continue with other directories instead of failing completely\n                }\n            } else if (entry.isFile()) {\n                const ext = path__WEBPACK_IMPORTED_MODULE_2___default().extname(entry.name).toLowerCase();\n                if (APP_EXTENSIONS.includes(ext)) {\n                    try {\n                        const stats = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(fullPath);\n                        const hash = await calculateFileHash(fullPath);\n                        if (hash) {\n                            files.push({\n                                path: fullPath,\n                                name: entry.name,\n                                size: stats.size,\n                                hash\n                            });\n                        }\n                    } catch (error) {\n                        console.error(`Error processing file ${fullPath}:`, error);\n                    // Continue with other files\n                    }\n                }\n            }\n        }\n    } catch (error) {\n        if (error instanceof Error) {\n            if (error.message.includes(\"ENOENT\")) {\n                throw new Error(`Directory not found: ${cleanPath}. Please check the path and try again.`);\n            } else if (error.message.includes(\"EACCES\")) {\n                throw new Error(`Permission denied accessing: ${cleanPath}. Please check directory permissions.`);\n            } else {\n                throw new Error(`Error reading directory \"${cleanPath}\": ${error.message}`);\n            }\n        } else {\n            throw new Error(`Unknown error reading directory: ${cleanPath}`);\n        }\n    }\n    return files;\n}\nfunction findDuplicates(files) {\n    const hashGroups = new Map();\n    files.forEach((file)=>{\n        if (!hashGroups.has(file.hash)) {\n            hashGroups.set(file.hash, []);\n        }\n        hashGroups.get(file.hash).push(file);\n    });\n    const duplicateGroups = [];\n    hashGroups.forEach((groupFiles, hash)=>{\n        if (groupFiles.length > 1) {\n            duplicateGroups.push({\n                hash,\n                files: groupFiles,\n                size: groupFiles[0].size\n            });\n        }\n    });\n    return duplicateGroups;\n}\nasync function loadRules() {\n    try {\n        const rulesPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", \"rules.json\");\n        const rulesData = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readFile(rulesPath, \"utf-8\");\n        return JSON.parse(rulesData).rules || [];\n    } catch (error) {\n        // Return default rules if file doesn't exist\n        return [\n            {\n                id: \"1\",\n                category: \"Developer Tools\",\n                keywords: [\n                    \"code\",\n                    \"studio\",\n                    \"dev\",\n                    \"git\",\n                    \"npm\",\n                    \"node\",\n                    \"python\",\n                    \"java\",\n                    \"ide\"\n                ],\n                pathPatterns: [\n                    \"/Developer\",\n                    \"/Applications/Developer\"\n                ],\n                enabled: true\n            },\n            {\n                id: \"2\",\n                category: \"Productivity\",\n                keywords: [\n                    \"office\",\n                    \"word\",\n                    \"excel\",\n                    \"powerpoint\",\n                    \"notes\",\n                    \"calendar\",\n                    \"mail\"\n                ],\n                pathPatterns: [\n                    \"/Applications/Office\"\n                ],\n                enabled: true\n            },\n            {\n                id: \"3\",\n                category: \"Entertainment\",\n                keywords: [\n                    \"game\",\n                    \"media\",\n                    \"player\",\n                    \"music\",\n                    \"video\",\n                    \"steam\"\n                ],\n                pathPatterns: [\n                    \"/Games\",\n                    \"/Applications/Games\"\n                ],\n                enabled: true\n            },\n            {\n                id: \"4\",\n                category: \"System Utilities\",\n                keywords: [\n                    \"system\",\n                    \"utility\",\n                    \"cleaner\",\n                    \"monitor\",\n                    \"backup\"\n                ],\n                pathPatterns: [\n                    \"/System\",\n                    \"/usr/bin\"\n                ],\n                enabled: true\n            }\n        ];\n    }\n}\nfunction categorizeFiles(files, rules) {\n    const categorized = {};\n    const uncategorized = [];\n    files.forEach((file)=>{\n        let assigned = false;\n        for (const rule of rules){\n            if (!rule.enabled) continue;\n            const fileName = file.name.toLowerCase();\n            const filePath = file.path.toLowerCase();\n            // Check keywords\n            const matchesKeyword = rule.keywords.some((keyword)=>fileName.includes(keyword.toLowerCase()));\n            // Check path patterns\n            const matchesPath = rule.pathPatterns.some((pattern)=>filePath.includes(pattern.toLowerCase()));\n            if (matchesKeyword || matchesPath) {\n                if (!categorized[rule.category]) {\n                    categorized[rule.category] = [];\n                }\n                categorized[rule.category].push({\n                    ...file,\n                    category: rule.category\n                });\n                assigned = true;\n                break;\n            }\n        }\n        if (!assigned) {\n            uncategorized.push({\n                ...file,\n                category: \"Uncategorized\"\n            });\n        }\n    });\n    if (uncategorized.length > 0) {\n        categorized[\"Uncategorized\"] = uncategorized;\n    }\n    return categorized;\n}\nasync function logOperation(message, level = \"INFO\") {\n    const timestamp = new Date().toISOString();\n    const logEntry = {\n        timestamp,\n        level,\n        message\n    };\n    try {\n        const dataDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\");\n        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.mkdir(dataDir, {\n            recursive: true\n        });\n        const logPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(dataDir, \"logs.json\");\n        let logs = [];\n        try {\n            const existingLogs = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readFile(logPath, \"utf-8\");\n            logs = JSON.parse(existingLogs).logs || [];\n        } catch (error) {\n        // File doesn't exist, start with empty array\n        }\n        logs.push(logEntry);\n        // Keep only last 1000 log entries\n        if (logs.length > 1000) {\n            logs = logs.slice(-1000);\n        }\n        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.writeFile(logPath, JSON.stringify({\n            logs\n        }, null, 2));\n    } catch (error) {\n        console.error(\"Failed to write log:\", error);\n    }\n}\nasync function updateScanStats() {\n    try {\n        const dataDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\");\n        const statsPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(dataDir, \"system-stats.json\");\n        let stats = {\n            totalScans: 0,\n            storageSaved: 0,\n            autoScanEnabled: false,\n            autoScanInterval: 24\n        };\n        try {\n            const existingStats = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readFile(statsPath, \"utf-8\");\n            stats = {\n                ...stats,\n                ...JSON.parse(existingStats)\n            };\n        } catch (error) {\n        // File doesn't exist, use defaults\n        }\n        stats.totalScans += 1;\n        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.writeFile(statsPath, JSON.stringify(stats, null, 2));\n    } catch (error) {\n        console.error(\"Failed to update scan stats:\", error);\n    }\n}\nasync function POST(request) {\n    try {\n        const { directory } = await request.json();\n        if (!directory || typeof directory !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Valid directory path is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Clean and validate the directory path\n        const cleanDirectory = directory.replace(/^[\"']|[\"']$/g, \"\").trim();\n        if (!cleanDirectory) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Directory path cannot be empty\"\n            }, {\n                status: 400\n            });\n        }\n        await logOperation(`Starting scan of directory: ${cleanDirectory}`);\n        const startTime = Date.now();\n        try {\n            // Scan directory for application files\n            const files = await scanDirectory(cleanDirectory);\n            await logOperation(`Found ${files.length} application files`);\n            // Find duplicates\n            const duplicateGroups = findDuplicates(files);\n            await logOperation(`Detected ${duplicateGroups.length} duplicate groups`);\n            // Load rules and categorize files\n            const rules = await loadRules();\n            const categorizedFiles = categorizeFiles(files, rules);\n            await logOperation(`Categorized files into ${Object.keys(categorizedFiles).length} categories`);\n            const scanTime = (Date.now() - startTime) / 1000;\n            const result = {\n                totalFiles: files.length,\n                duplicateGroups,\n                categorizedFiles,\n                scanTime\n            };\n            // Save scan results\n            const dataDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\");\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.mkdir(dataDir, {\n                recursive: true\n            });\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.writeFile(path__WEBPACK_IMPORTED_MODULE_2___default().join(dataDir, \"last-scan.json\"), JSON.stringify(result, null, 2));\n            // Update scan statistics\n            await updateScanStats();\n            await logOperation(`Scan completed in ${scanTime.toFixed(2)} seconds`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n        } catch (scanError) {\n            const errorMessage = scanError instanceof Error ? scanError.message : \"Scan operation failed\";\n            await logOperation(`Scan failed: ${errorMessage}`, \"ERROR\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: errorMessage\n            }, {\n                status: 400\n            });\n        }\n    } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        await logOperation(`Request processing failed: ${errorMessage}`, \"ERROR\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L2FwcC9hcGkvc2Nhbi9yb3V0ZS50cz83YWIzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nXG5cbmludGVyZmFjZSBGaWxlSW5mbyB7XG4gIHBhdGg6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgc2l6ZTogbnVtYmVyXG4gIGhhc2g6IHN0cmluZ1xuICBjYXRlZ29yeT86IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgRHVwbGljYXRlR3JvdXAge1xuICBoYXNoOiBzdHJpbmdcbiAgZmlsZXM6IEZpbGVJbmZvW11cbiAgc2l6ZTogbnVtYmVyXG59XG5cbmludGVyZmFjZSBSdWxlIHtcbiAgaWQ6IHN0cmluZ1xuICBjYXRlZ29yeTogc3RyaW5nXG4gIGtleXdvcmRzOiBzdHJpbmdbXVxuICBwYXRoUGF0dGVybnM6IHN0cmluZ1tdXG4gIGVuYWJsZWQ6IGJvb2xlYW5cbn1cblxuY29uc3QgQVBQX0VYVEVOU0lPTlMgPSBbJy5leGUnLCAnLm1zaScsICcuYXBrJywgJy5zaCcsICcuYXBwJywgJy5kZWInLCAnLnJwbScsICcuZG1nJywgJy5wa2cnLCAnLmFwcHgnLCAnLnNuYXAnXVxuXG5hc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVGaWxlSGFzaChmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmaWxlQnVmZmVyID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZVBhdGgpXG4gICAgY29uc3QgaGFzaFN1bSA9IGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKVxuICAgIGhhc2hTdW0udXBkYXRlKGZpbGVCdWZmZXIpXG4gICAgcmV0dXJuIGhhc2hTdW0uZGlnZXN0KCdoZXgnKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNhbGN1bGF0aW5nIGhhc2ggZm9yICR7ZmlsZVBhdGh9OmAsIGVycm9yKVxuICAgIHJldHVybiAnJ1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNjYW5EaXJlY3RvcnkoZGlyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxGaWxlSW5mb1tdPiB7XG4gIGNvbnN0IGZpbGVzOiBGaWxlSW5mb1tdID0gW11cbiAgXG4gIC8vIENsZWFuIHRoZSBkaXJlY3RvcnkgcGF0aCAtIHJlbW92ZSBleHRyYSBxdW90ZXMgYW5kIG5vcm1hbGl6ZVxuICBjb25zdCBjbGVhblBhdGggPSBkaXJQYXRoLnJlcGxhY2UoL15bXCInXXxbXCInXSQvZywgJycpLnRyaW0oKVxuICBcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBpZiBkaXJlY3RvcnkgZXhpc3RzXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBmcy5zdGF0KGNsZWFuUGF0aClcbiAgICBpZiAoIXN0YXRzLmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUGF0aCBpcyBub3QgYSBkaXJlY3Rvcnk6ICR7Y2xlYW5QYXRofWApXG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBTY2FubmluZyBkaXJlY3Rvcnk6ICR7Y2xlYW5QYXRofWApXG4gICAgXG4gICAgY29uc3QgZW50cmllcyA9IGF3YWl0IGZzLnJlYWRkaXIoY2xlYW5QYXRoLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSlcbiAgICBcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcGF0aC5qb2luKGNsZWFuUGF0aCwgZW50cnkubmFtZSlcbiAgICAgIFxuICAgICAgaWYgKGVudHJ5LmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgc2NhbiBzdWJkaXJlY3RvcmllcyB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc3ViRmlsZXMgPSBhd2FpdCBzY2FuRGlyZWN0b3J5KGZ1bGxQYXRoKVxuICAgICAgICAgIGZpbGVzLnB1c2goLi4uc3ViRmlsZXMpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igc2Nhbm5pbmcgc3ViZGlyZWN0b3J5ICR7ZnVsbFBhdGh9OmAsIGVycm9yKVxuICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGggb3RoZXIgZGlyZWN0b3JpZXMgaW5zdGVhZCBvZiBmYWlsaW5nIGNvbXBsZXRlbHlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS5pc0ZpbGUoKSkge1xuICAgICAgICBjb25zdCBleHQgPSBwYXRoLmV4dG5hbWUoZW50cnkubmFtZSkudG9Mb3dlckNhc2UoKVxuICAgICAgICBpZiAoQVBQX0VYVEVOU0lPTlMuaW5jbHVkZXMoZXh0KSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGZzLnN0YXQoZnVsbFBhdGgpXG4gICAgICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgY2FsY3VsYXRlRmlsZUhhc2goZnVsbFBhdGgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChoYXNoKSB7XG4gICAgICAgICAgICAgIGZpbGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICAgICAgICAgIG5hbWU6IGVudHJ5Lm5hbWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogc3RhdHMuc2l6ZSxcbiAgICAgICAgICAgICAgICBoYXNoXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgZmlsZSAke2Z1bGxQYXRofTpgLCBlcnJvcilcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGggb3RoZXIgZmlsZXNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdFTk9FTlQnKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpcmVjdG9yeSBub3QgZm91bmQ6ICR7Y2xlYW5QYXRofS4gUGxlYXNlIGNoZWNrIHRoZSBwYXRoIGFuZCB0cnkgYWdhaW4uYClcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRUFDQ0VTJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQZXJtaXNzaW9uIGRlbmllZCBhY2Nlc3Npbmc6ICR7Y2xlYW5QYXRofS4gUGxlYXNlIGNoZWNrIGRpcmVjdG9yeSBwZXJtaXNzaW9ucy5gKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciByZWFkaW5nIGRpcmVjdG9yeSBcIiR7Y2xlYW5QYXRofVwiOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGVycm9yIHJlYWRpbmcgZGlyZWN0b3J5OiAke2NsZWFuUGF0aH1gKVxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGZpbGVzXG59XG5cbmZ1bmN0aW9uIGZpbmREdXBsaWNhdGVzKGZpbGVzOiBGaWxlSW5mb1tdKTogRHVwbGljYXRlR3JvdXBbXSB7XG4gIGNvbnN0IGhhc2hHcm91cHMgPSBuZXcgTWFwPHN0cmluZywgRmlsZUluZm9bXT4oKVxuICBcbiAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICBpZiAoIWhhc2hHcm91cHMuaGFzKGZpbGUuaGFzaCkpIHtcbiAgICAgIGhhc2hHcm91cHMuc2V0KGZpbGUuaGFzaCwgW10pXG4gICAgfVxuICAgIGhhc2hHcm91cHMuZ2V0KGZpbGUuaGFzaCkhLnB1c2goZmlsZSlcbiAgfSlcbiAgXG4gIGNvbnN0IGR1cGxpY2F0ZUdyb3VwczogRHVwbGljYXRlR3JvdXBbXSA9IFtdXG4gIGhhc2hHcm91cHMuZm9yRWFjaCgoZ3JvdXBGaWxlcywgaGFzaCkgPT4ge1xuICAgIGlmIChncm91cEZpbGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGR1cGxpY2F0ZUdyb3Vwcy5wdXNoKHtcbiAgICAgICAgaGFzaCxcbiAgICAgICAgZmlsZXM6IGdyb3VwRmlsZXMsXG4gICAgICAgIHNpemU6IGdyb3VwRmlsZXNbMF0uc2l6ZVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG4gIFxuICByZXR1cm4gZHVwbGljYXRlR3JvdXBzXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWRSdWxlcygpOiBQcm9taXNlPFJ1bGVbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJ1bGVzUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YScsICdydWxlcy5qc29uJylcbiAgICBjb25zdCBydWxlc0RhdGEgPSBhd2FpdCBmcy5yZWFkRmlsZShydWxlc1BhdGgsICd1dGYtOCcpXG4gICAgcmV0dXJuIEpTT04ucGFyc2UocnVsZXNEYXRhKS5ydWxlcyB8fCBbXVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIFJldHVybiBkZWZhdWx0IHJ1bGVzIGlmIGZpbGUgZG9lc24ndCBleGlzdFxuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGNhdGVnb3J5OiAnRGV2ZWxvcGVyIFRvb2xzJyxcbiAgICAgICAga2V5d29yZHM6IFsnY29kZScsICdzdHVkaW8nLCAnZGV2JywgJ2dpdCcsICducG0nLCAnbm9kZScsICdweXRob24nLCAnamF2YScsICdpZGUnXSxcbiAgICAgICAgcGF0aFBhdHRlcm5zOiBbJy9EZXZlbG9wZXInLCAnL0FwcGxpY2F0aW9ucy9EZXZlbG9wZXInXSxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICcyJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdQcm9kdWN0aXZpdHknLFxuICAgICAgICBrZXl3b3JkczogWydvZmZpY2UnLCAnd29yZCcsICdleGNlbCcsICdwb3dlcnBvaW50JywgJ25vdGVzJywgJ2NhbGVuZGFyJywgJ21haWwnXSxcbiAgICAgICAgcGF0aFBhdHRlcm5zOiBbJy9BcHBsaWNhdGlvbnMvT2ZmaWNlJ10sXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnMycsXG4gICAgICAgIGNhdGVnb3J5OiAnRW50ZXJ0YWlubWVudCcsXG4gICAgICAgIGtleXdvcmRzOiBbJ2dhbWUnLCAnbWVkaWEnLCAncGxheWVyJywgJ211c2ljJywgJ3ZpZGVvJywgJ3N0ZWFtJ10sXG4gICAgICAgIHBhdGhQYXR0ZXJuczogWycvR2FtZXMnLCAnL0FwcGxpY2F0aW9ucy9HYW1lcyddLFxuICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJzQnLFxuICAgICAgICBjYXRlZ29yeTogJ1N5c3RlbSBVdGlsaXRpZXMnLFxuICAgICAgICBrZXl3b3JkczogWydzeXN0ZW0nLCAndXRpbGl0eScsICdjbGVhbmVyJywgJ21vbml0b3InLCAnYmFja3VwJ10sXG4gICAgICAgIHBhdGhQYXR0ZXJuczogWycvU3lzdGVtJywgJy91c3IvYmluJ10sXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgIH1cbiAgICBdXG4gIH1cbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUZpbGVzKGZpbGVzOiBGaWxlSW5mb1tdLCBydWxlczogUnVsZVtdKTogeyBbY2F0ZWdvcnk6IHN0cmluZ106IEZpbGVJbmZvW10gfSB7XG4gIGNvbnN0IGNhdGVnb3JpemVkOiB7IFtjYXRlZ29yeTogc3RyaW5nXTogRmlsZUluZm9bXSB9ID0ge31cbiAgY29uc3QgdW5jYXRlZ29yaXplZDogRmlsZUluZm9bXSA9IFtdXG4gIFxuICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgIGxldCBhc3NpZ25lZCA9IGZhbHNlXG4gICAgXG4gICAgZm9yIChjb25zdCBydWxlIG9mIHJ1bGVzKSB7XG4gICAgICBpZiAoIXJ1bGUuZW5hYmxlZCkgY29udGludWVcbiAgICAgIFxuICAgICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBrZXl3b3Jkc1xuICAgICAgY29uc3QgbWF0Y2hlc0tleXdvcmQgPSBydWxlLmtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBcbiAgICAgICAgZmlsZU5hbWUuaW5jbHVkZXMoa2V5d29yZC50b0xvd2VyQ2FzZSgpKVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBwYXRoIHBhdHRlcm5zXG4gICAgICBjb25zdCBtYXRjaGVzUGF0aCA9IHJ1bGUucGF0aFBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBcbiAgICAgICAgZmlsZVBhdGguaW5jbHVkZXMocGF0dGVybi50b0xvd2VyQ2FzZSgpKVxuICAgICAgKVxuICAgICAgXG4gICAgICBpZiAobWF0Y2hlc0tleXdvcmQgfHwgbWF0Y2hlc1BhdGgpIHtcbiAgICAgICAgaWYgKCFjYXRlZ29yaXplZFtydWxlLmNhdGVnb3J5XSkge1xuICAgICAgICAgIGNhdGVnb3JpemVkW3J1bGUuY2F0ZWdvcnldID0gW11cbiAgICAgICAgfVxuICAgICAgICBjYXRlZ29yaXplZFtydWxlLmNhdGVnb3J5XS5wdXNoKHsgLi4uZmlsZSwgY2F0ZWdvcnk6IHJ1bGUuY2F0ZWdvcnkgfSlcbiAgICAgICAgYXNzaWduZWQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmICghYXNzaWduZWQpIHtcbiAgICAgIHVuY2F0ZWdvcml6ZWQucHVzaCh7IC4uLmZpbGUsIGNhdGVnb3J5OiAnVW5jYXRlZ29yaXplZCcgfSlcbiAgICB9XG4gIH0pXG4gIFxuICBpZiAodW5jYXRlZ29yaXplZC5sZW5ndGggPiAwKSB7XG4gICAgY2F0ZWdvcml6ZWRbJ1VuY2F0ZWdvcml6ZWQnXSA9IHVuY2F0ZWdvcml6ZWRcbiAgfVxuICBcbiAgcmV0dXJuIGNhdGVnb3JpemVkXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvZ09wZXJhdGlvbihtZXNzYWdlOiBzdHJpbmcsIGxldmVsOiAnSU5GTycgfCAnV0FSTicgfCAnRVJST1InID0gJ0lORk8nKSB7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICBjb25zdCBsb2dFbnRyeSA9IHsgdGltZXN0YW1wLCBsZXZlbCwgbWVzc2FnZSB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGRhdGFEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnKVxuICAgIGF3YWl0IGZzLm1rZGlyKGRhdGFEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgXG4gICAgY29uc3QgbG9nUGF0aCA9IHBhdGguam9pbihkYXRhRGlyLCAnbG9ncy5qc29uJylcbiAgICBsZXQgbG9ncyA9IFtdXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nTG9ncyA9IGF3YWl0IGZzLnJlYWRGaWxlKGxvZ1BhdGgsICd1dGYtOCcpXG4gICAgICBsb2dzID0gSlNPTi5wYXJzZShleGlzdGluZ0xvZ3MpLmxvZ3MgfHwgW11cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gRmlsZSBkb2Vzbid0IGV4aXN0LCBzdGFydCB3aXRoIGVtcHR5IGFycmF5XG4gICAgfVxuICAgIFxuICAgIGxvZ3MucHVzaChsb2dFbnRyeSlcbiAgICBcbiAgICAvLyBLZWVwIG9ubHkgbGFzdCAxMDAwIGxvZyBlbnRyaWVzXG4gICAgaWYgKGxvZ3MubGVuZ3RoID4gMTAwMCkge1xuICAgICAgbG9ncyA9IGxvZ3Muc2xpY2UoLTEwMDApXG4gICAgfVxuICAgIFxuICAgIGF3YWl0IGZzLndyaXRlRmlsZShsb2dQYXRoLCBKU09OLnN0cmluZ2lmeSh7IGxvZ3MgfSwgbnVsbCwgMikpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHdyaXRlIGxvZzonLCBlcnJvcilcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVTY2FuU3RhdHMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGF0YURpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YScpXG4gICAgY29uc3Qgc3RhdHNQYXRoID0gcGF0aC5qb2luKGRhdGFEaXIsICdzeXN0ZW0tc3RhdHMuanNvbicpXG4gICAgXG4gICAgbGV0IHN0YXRzID0ge1xuICAgICAgdG90YWxTY2FuczogMCxcbiAgICAgIHN0b3JhZ2VTYXZlZDogMCxcbiAgICAgIGF1dG9TY2FuRW5hYmxlZDogZmFsc2UsXG4gICAgICBhdXRvU2NhbkludGVydmFsOiAyNFxuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhpc3RpbmdTdGF0cyA9IGF3YWl0IGZzLnJlYWRGaWxlKHN0YXRzUGF0aCwgJ3V0Zi04JylcbiAgICAgIHN0YXRzID0geyAuLi5zdGF0cywgLi4uSlNPTi5wYXJzZShleGlzdGluZ1N0YXRzKSB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIEZpbGUgZG9lc24ndCBleGlzdCwgdXNlIGRlZmF1bHRzXG4gICAgfVxuICAgIFxuICAgIHN0YXRzLnRvdGFsU2NhbnMgKz0gMVxuICAgIFxuICAgIGF3YWl0IGZzLndyaXRlRmlsZShzdGF0c1BhdGgsIEpTT04uc3RyaW5naWZ5KHN0YXRzLCBudWxsLCAyKSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHNjYW4gc3RhdHM6JywgZXJyb3IpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRpcmVjdG9yeSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBcbiAgICBpZiAoIWRpcmVjdG9yeSB8fCB0eXBlb2YgZGlyZWN0b3J5ICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnVmFsaWQgZGlyZWN0b3J5IHBhdGggaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbiBhbmQgdmFsaWRhdGUgdGhlIGRpcmVjdG9yeSBwYXRoXG4gICAgY29uc3QgY2xlYW5EaXJlY3RvcnkgPSBkaXJlY3RvcnkucmVwbGFjZSgvXltcIiddfFtcIiddJC9nLCAnJykudHJpbSgpXG4gICAgXG4gICAgaWYgKCFjbGVhbkRpcmVjdG9yeSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRGlyZWN0b3J5IHBhdGggY2Fubm90IGJlIGVtcHR5JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgbG9nT3BlcmF0aW9uKGBTdGFydGluZyBzY2FuIG9mIGRpcmVjdG9yeTogJHtjbGVhbkRpcmVjdG9yeX1gKVxuICAgIFxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gU2NhbiBkaXJlY3RvcnkgZm9yIGFwcGxpY2F0aW9uIGZpbGVzXG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHNjYW5EaXJlY3RvcnkoY2xlYW5EaXJlY3RvcnkpXG4gICAgICBhd2FpdCBsb2dPcGVyYXRpb24oYEZvdW5kICR7ZmlsZXMubGVuZ3RofSBhcHBsaWNhdGlvbiBmaWxlc2ApXG4gICAgICBcbiAgICAgIC8vIEZpbmQgZHVwbGljYXRlc1xuICAgICAgY29uc3QgZHVwbGljYXRlR3JvdXBzID0gZmluZER1cGxpY2F0ZXMoZmlsZXMpXG4gICAgICBhd2FpdCBsb2dPcGVyYXRpb24oYERldGVjdGVkICR7ZHVwbGljYXRlR3JvdXBzLmxlbmd0aH0gZHVwbGljYXRlIGdyb3Vwc2ApXG4gICAgICBcbiAgICAgIC8vIExvYWQgcnVsZXMgYW5kIGNhdGVnb3JpemUgZmlsZXNcbiAgICAgIGNvbnN0IHJ1bGVzID0gYXdhaXQgbG9hZFJ1bGVzKClcbiAgICAgIGNvbnN0IGNhdGVnb3JpemVkRmlsZXMgPSBjYXRlZ29yaXplRmlsZXMoZmlsZXMsIHJ1bGVzKVxuICAgICAgYXdhaXQgbG9nT3BlcmF0aW9uKGBDYXRlZ29yaXplZCBmaWxlcyBpbnRvICR7T2JqZWN0LmtleXMoY2F0ZWdvcml6ZWRGaWxlcykubGVuZ3RofSBjYXRlZ29yaWVzYClcbiAgICAgIFxuICAgICAgY29uc3Qgc2NhblRpbWUgPSAoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSkgLyAxMDAwXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgdG90YWxGaWxlczogZmlsZXMubGVuZ3RoLFxuICAgICAgICBkdXBsaWNhdGVHcm91cHMsXG4gICAgICAgIGNhdGVnb3JpemVkRmlsZXMsXG4gICAgICAgIHNjYW5UaW1lXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNhdmUgc2NhbiByZXN1bHRzXG4gICAgICBjb25zdCBkYXRhRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJylcbiAgICAgIGF3YWl0IGZzLm1rZGlyKGRhdGFEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgICBhd2FpdCBmcy53cml0ZUZpbGUoXG4gICAgICAgIHBhdGguam9pbihkYXRhRGlyLCAnbGFzdC1zY2FuLmpzb24nKSxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgc2NhbiBzdGF0aXN0aWNzXG4gICAgICBhd2FpdCB1cGRhdGVTY2FuU3RhdHMoKVxuICAgICAgXG4gICAgICBhd2FpdCBsb2dPcGVyYXRpb24oYFNjYW4gY29tcGxldGVkIGluICR7c2NhblRpbWUudG9GaXhlZCgyKX0gc2Vjb25kc2ApXG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXN1bHQpXG4gICAgfSBjYXRjaCAoc2NhbkVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBzY2FuRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHNjYW5FcnJvci5tZXNzYWdlIDogJ1NjYW4gb3BlcmF0aW9uIGZhaWxlZCdcbiAgICAgIGF3YWl0IGxvZ09wZXJhdGlvbihgU2NhbiBmYWlsZWQ6ICR7ZXJyb3JNZXNzYWdlfWAsICdFUlJPUicpXG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogZXJyb3JNZXNzYWdlIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJ1xuICAgIGF3YWl0IGxvZ09wZXJhdGlvbihgUmVxdWVzdCBwcm9jZXNzaW5nIGZhaWxlZDogJHtlcnJvck1lc3NhZ2V9YCwgJ0VSUk9SJylcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJvbWlzZXMiLCJmcyIsInBhdGgiLCJjcnlwdG8iLCJBUFBfRVhURU5TSU9OUyIsImNhbGN1bGF0ZUZpbGVIYXNoIiwiZmlsZVBhdGgiLCJmaWxlQnVmZmVyIiwicmVhZEZpbGUiLCJoYXNoU3VtIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImVycm9yIiwiY29uc29sZSIsInNjYW5EaXJlY3RvcnkiLCJkaXJQYXRoIiwiZmlsZXMiLCJjbGVhblBhdGgiLCJyZXBsYWNlIiwidHJpbSIsInN0YXRzIiwic3RhdCIsImlzRGlyZWN0b3J5IiwiRXJyb3IiLCJsb2ciLCJlbnRyaWVzIiwicmVhZGRpciIsIndpdGhGaWxlVHlwZXMiLCJlbnRyeSIsImZ1bGxQYXRoIiwiam9pbiIsIm5hbWUiLCJzdWJGaWxlcyIsInB1c2giLCJpc0ZpbGUiLCJleHQiLCJleHRuYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImhhc2giLCJzaXplIiwibWVzc2FnZSIsImZpbmREdXBsaWNhdGVzIiwiaGFzaEdyb3VwcyIsIk1hcCIsImZvckVhY2giLCJmaWxlIiwiaGFzIiwic2V0IiwiZ2V0IiwiZHVwbGljYXRlR3JvdXBzIiwiZ3JvdXBGaWxlcyIsImxlbmd0aCIsImxvYWRSdWxlcyIsInJ1bGVzUGF0aCIsInByb2Nlc3MiLCJjd2QiLCJydWxlc0RhdGEiLCJKU09OIiwicGFyc2UiLCJydWxlcyIsImlkIiwiY2F0ZWdvcnkiLCJrZXl3b3JkcyIsInBhdGhQYXR0ZXJucyIsImVuYWJsZWQiLCJjYXRlZ29yaXplRmlsZXMiLCJjYXRlZ29yaXplZCIsInVuY2F0ZWdvcml6ZWQiLCJhc3NpZ25lZCIsInJ1bGUiLCJmaWxlTmFtZSIsIm1hdGNoZXNLZXl3b3JkIiwic29tZSIsImtleXdvcmQiLCJtYXRjaGVzUGF0aCIsInBhdHRlcm4iLCJsb2dPcGVyYXRpb24iLCJsZXZlbCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImxvZ0VudHJ5IiwiZGF0YURpciIsIm1rZGlyIiwicmVjdXJzaXZlIiwibG9nUGF0aCIsImxvZ3MiLCJleGlzdGluZ0xvZ3MiLCJzbGljZSIsIndyaXRlRmlsZSIsInN0cmluZ2lmeSIsInVwZGF0ZVNjYW5TdGF0cyIsInN0YXRzUGF0aCIsInRvdGFsU2NhbnMiLCJzdG9yYWdlU2F2ZWQiLCJhdXRvU2NhbkVuYWJsZWQiLCJhdXRvU2NhbkludGVydmFsIiwiZXhpc3RpbmdTdGF0cyIsIlBPU1QiLCJyZXF1ZXN0IiwiZGlyZWN0b3J5IiwianNvbiIsInN0YXR1cyIsImNsZWFuRGlyZWN0b3J5Iiwic3RhcnRUaW1lIiwibm93IiwiY2F0ZWdvcml6ZWRGaWxlcyIsIk9iamVjdCIsImtleXMiLCJzY2FuVGltZSIsInJlc3VsdCIsInRvdGFsRmlsZXMiLCJ0b0ZpeGVkIiwic2NhbkVycm9yIiwiZXJyb3JNZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/scan/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fscan%2Froute&page=%2Fapi%2Fscan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fscan%2Froute.ts&appDir=C%3A%5CUsers%5Cgowda%5COneDrive%5CDesktop%5Cintelligent-app-manager%20(2)%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cgowda%5COneDrive%5CDesktop%5Cintelligent-app-manager%20(2)&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();